{% extends "base.html" %}

{% block title %}Edit {{ record_type | capitalize }}{% endblock %}

{% block content %}
<h1>Edit {{ record_type | capitalize }}</h1>

<form method="POST">
    <!-- Hidden fields to preserve query parameters -->
    <input type="hidden" name="search" value="{{ request.args.get('search', '') }}">
    <input type="hidden" name="sort" value="{{ request.args.get('sort', 'event_title') }}">
    <input type="hidden" name="order" value="{{ request.args.get('order', 'asc') }}">
    <input type="hidden" name="city" value="{{ request.args.get('city', '') }}">
    <input type="hidden" name="state" value="{{ request.args.get('state', '') }}">
    <input type="hidden" name="event_type" value="{{ request.args.get('event_type', '') }}">
    <input type="hidden" name="country" value="{{ request.args.get('country', '') }}">
    <input type="hidden" name="page" value="{{ request.args.get('page', 1) }}">

    {% if record_type == 'event' %}
    <div>
        <label for="event_title">Event Title:</label>
        <input type="text" id="event_title" name="event_title" value="{{ record.event_title }}" required>
    </div>
    <div>
        <label for="event_date">Event Date:</label>
        <input type="date" id="event_date" name="event_date" value="{{ record.event_date }}">
    </div>
    <div>
        <label for="city">City:</label>
        <input type="text" id="city" name="city" value="{{ record.city }}">
    </div>
    <div>
        <label for="state">State:</label>
        <input type="text" id="state" name="state" value="{{ record.state }}">
    </div>
    <div>
        <label for="country">Country:</label>
        <input type="text" id="country" name="country" value="{{ record.country }}">
    </div>
    <div>
        <label for="event_type">Event Type:</label>
        <select id="event_type" name="event_type">
            <option value="Call to Action" {% if record.event_type == "Call to Action" %}selected{% endif %}>Call to Action</option>
            <option value="Courses" {% if record.event_type == "Courses" %}selected{% endif %}>Courses</option>
            <option value="Direct Advocacy" {% if record.event_type == "Direct Advocacy" %}selected{% endif %}>Direct Advocacy</option>
            <option value="Event Advertisement" {% if record.event_type == "Event Advertisement" %}selected{% endif %}>Event Advertisement</option>
            <option value="Meeting Advertisement" {% if record.event_type == "Meeting Advertisement" %}selected{% endif %}>Meeting Advertisement</option>
            <option value="Meeting Report" {% if record.event_type == "Meeting Report" %}selected{% endif %}>Meeting Report</option>
            <option value="Oppression Report" {% if record.event_type == "Oppression Report" %}selected{% endif %}>Oppression Report</option>
            <option value="Protest Report" {% if record.event_type == "Protest Report" %}selected{% endif %}>Protest Report</option>
        </select>
    </div>
    <div>
        <label for="description">Description:</label>
        <textarea id="description" name="description">{{ record.description }}</textarea>
    </div>
    {% elif record_type == 'publication' %}
    <div>
        <label for="pub_title">Publication Title:</label>
        <input type="text" id="pub_title" name="pub_title" value="{{ record.pub_title }}" required>
    </div>
    <div>
        <label for="volume">Volume:</label>
        <input type="number" id="volume" name="volume" value="{{ record.volume }}">
    </div>
    <div>
        <label for="issue_number">Issue Number:</label>
        <input type="number" id="issue_number" name="issue_number" value="{{ record.issue_number }}">
    </div>
    <div>
        <label for="issue_date">Issue Date:</label>
        <input type="date" id="issue_date" name="issue_date" value="{{ record.issue_date }}">
    </div>
    <div>
        <label for="author_org">Author/Organization:</label>
        <input type="text" id="author_org" name="author_org" value="{{ record.author_org }}">
    </div>
    <div>
        <label for="location">Location:</label>
        <input type="text" id="location" name="location" value="{{ record.location }}">
    </div>
    {% endif %}
    <button type="submit">Save Changes</button>
</form>
{% endblock %}