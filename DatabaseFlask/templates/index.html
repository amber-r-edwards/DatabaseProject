{% extends "base.html" %}

{% block title %}Events and Publications{% endblock %}

{% block content %}
<!-- Navigation Links -->
<div class="navigation">
    <a href="{{ url_for('add_event') }}" class="btn">Add Event</a>
    <a href="{{ url_for('add_publication') }}" class="btn">Add Publication</a>
</div>

<h1>Events</h1>

<!-- Events Table -->
<table border="1" cellpadding="10" cellspacing="0">
    <thead>
        <tr>
            <th><a href="{{ url_for('index', sort_events='event_title', order_events='asc' if order_events == 'desc' else 'desc', page_events=page_events) }}">Title</a></th>
            <th><a href="{{ url_for('index', sort_events='event_date', order_events='asc' if order_events == 'desc' else 'desc', page_events=page_events) }}">Date</a></th>
            <th><a href="{{ url_for('index', sort_events='city', order_events='asc' if order_events == 'desc' else 'desc', page_events=page_events) }}">City</a></th>
            <th><a href="{{ url_for('index', sort_events='state', order_events='asc' if order_events == 'desc' else 'desc', page_events=page_events) }}">State</a></th>
            <th><a href="{{ url_for('index', sort_events='country', order_events='asc' if order_events == 'desc' else 'desc', page_events=page_events) }}">Country</a></th>
            <th><a href="{{ url_for('index', sort_events='event_type', order_events='asc' if order_events == 'desc' else 'desc', page_events=page_events) }}">Type</a></th>
            <th>Publication</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for event in events %}
        <tr>
            <td>{{ event.event_title }}</td>
            <td>{{ event.event_date }}</td>
            <td>{{ event.city }}</td>
            <td>{{ event.state }}</td>
            <td>{{ event.country }}</td>
            <td>{{ event.event_type }}</td>
            <td>{{ event.publication_title }}</td>
            <td>
                <a href="{{ url_for('edit_record', record_type='event', record_id=event.event_id) }}" class="btn">Edit</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<!-- Events Pagination -->
<div class="pagination">
    {% if page_events > 1 %}
    <a href="{{ url_for('index', page_events=page_events-1, sort_events=sort_events, order_events=order_events) }}">Previous</a>
    {% endif %}
    <span>Page {{ page_events }} of {{ total_pages_events }}</span>
    {% if page_events < total_pages_events %}
    <a href="{{ url_for('index', page_events=page_events+1, sort_events=sort_events, order_events=order_events) }}">Next</a>
    {% endif %}
</div>

<h1>Publications</h1>

<!-- Publications Table -->
<table border="1" cellpadding="10" cellspacing="0">
    <thead>
        <tr>
            <th><a href="{{ url_for('index', sort_publications='pub_title', order_publications='asc' if order_publications == 'desc' else 'desc', page_publications=page_publications) }}">Title</a></th>
            <th><a href="{{ url_for('index', sort_publications='volume', order_publications='asc' if order_publications == 'desc' else 'desc', page_publications=page_publications) }}">Volume</a></th>
            <th><a href="{{ url_for('index', sort_publications='issue_number', order_publications='asc' if order_publications == 'desc' else 'desc', page_publications=page_publications) }}">Issue Number</a></th>
            <th><a href="{{ url_for('index', sort_publications='issue_date', order_publications='asc' if order_publications == 'desc' else 'desc', page_publications=page_publications) }}">Issue Date</a></th>
            <th><a href="{{ url_for('index', sort_publications='author_org', order_publications='asc' if order_publications == 'desc' else 'desc', page_publications=page_publications) }}">Author/Organization</a></th>
            <th><a href="{{ url_for('index', sort_publications='location', order_publications='asc' if order_publications == 'desc' else 'desc', page_publications=page_publications) }}">Location</a></th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for publication in publications %}
        <tr>
            <td>{{ publication.pub_title }}</td>
            <td>{{ publication.volume }}</td>
            <td>{{ publication.issue_number }}</td>
            <td>{{ publication.issue_date }}</td>
            <td>{{ publication.author_org }}</td>
            <td>{{ publication.location }}</td>
            <td>
                <a href="{{ url_for('edit_record', record_type='publication', record_id=publication.pub_id) }}" class="btn">Edit</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<!-- Publications Pagination -->
<div class="pagination">
    {% if page_publications > 1 %}
    <a href="{{ url_for('index', page_publications=page_publications-1, sort_publications=sort_publications, order_publications=order_publications) }}">Previous</a>
    {% endif %}
    <span>Page {{ page_publications }} of {{ total_pages_publications }}</span>
    {% if page_publications < total_pages_publications %}
    <a href="{{ url_for('index', page_publications=page_publications+1, sort_publications=sort_publications, order_publications=order_publications) }}">Next</a>
    {% endif %}
</div>
{% endblock %}